<!DOCTYPE html>
<meta charset="UTF-8">
<script>
// html5 발표 당시 html4와 크게 달라진 점으로 부각되었던 것이
// 멀티미디어(video/audio), 로컬저장소(offline 상황대응)
// 브라우저 밖의 카메라, 마이크, 스피커등등 주변기기에 접속(WebRTC라 부름)
// RTC -> Real Time Communication, 필수 조건이 보안상 https 프로토콜. (openSSL을 쓰면 셀프인증서를 만들수 있음) -> 하지만 localhost에서만 사용가능

// sessionStorage localStorage와 정확히 사용법이 똑같음
// 단지 데이터가 자동으로 사라짐(브라우저에서 나가거나, 페이지를 벗어나면)
// 문자열만 저장이 가능함(중요!!!!!!!!!)

var v_y = [1,2,3,4,5];
// alert(v_y);// 자동으로 v_y.toString();으로 실행됨

localStorage.setItem("키값1","김무건");  //쓰기
localStorage.setItem("키값2","최승훈");
localStorage.setItem("키값3","이준혁");
localStorage.setItem("키값4","이승연짱");   // 키값이 이미 있는것과 같으면 update됨.(추가가 아니고 덮어써짐)
localStorage.setItem("테스트",JSON.stringify(["1","2"])); 
localStorage.setItem("dongmin",JSON.stringify( {name: "동민", nickName: "태권브이"}));  // application화면에서 객체로 보이는것 같아도 문자열로 변환된것임.
//setItem 메서드는 다른 언어 사용자의 편의를 위해 만들어 주었음
localStorage.apple = "사과";

var v_dongmin = JSON.parse( localStorage.getItem("dongmin"));
alert(v_dongmin.nickName);
// 헷갈리면 명확히 object <=> string, localStorage는 문자열만 저장가능

// 사용 포인트(stringify로 문자열 parse로 꺼내서 사용)
var v_question = localStorage.getItem("테스트");
// alert(typeof(v_question));
// ["1","2"] 문자열이라서 인덱스0번부터 하나씩 인식됨 0번이 [ 1번이 "  2번이 1 ...
alert(v_question[1]);
v_question = JSON.parse(v_question); // 배열로 바꿔야 배열로 인식됨.
// alert(localStorage.getItem("키값2")); // 읽기
// alert(localStorage.length);
// alert(localStorage.key(3));      // key값 읽어오기
/*
for(var v_key in localStorage){     // 객체 속성(key) 읽을 때 사용
    alert(v_key); 
} 
*/

localStorage.removeItem("키값3");   // 지우기
localStorage.clear();               // 전체 지우기, 사용자는 브라우저 마우스 오른쪽 버튼으로 지울수도 있음.
</script>